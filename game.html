<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino Roulette â€” Kevin Laska</title>
    <style>
        :root {
            --maroon: #7A0019;
            --gold: #FFC627;
            --white: #fff;
            --table-green: #006417;
            --chip-red: #e81e28;
            --chip-black: #1e1e1e;
        }
        
        body {
            margin: 0;
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
            background: linear-gradient(180deg, var(--maroon), #560012);
            color: var(--white);
            min-height: 100vh;
        }

        .wrap {
            max-width: 1100px;
            margin: 28px auto;
            padding: 20px;
        }

        .site-nav {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-bottom: 18px;
        }

        .site-nav a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 8px;
        }

        .site-nav a:hover, .site-nav a.active {
            background: var(--gold);
            color: var(--maroon);
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 40px;
        }

        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
        }

        #wheel {
            width: 100%;
            height: 100%;
            transition: transform 0.1s linear;
        }

        .pointer-container {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 20px;
            z-index: 2;
        }

        #spin-button {
            background: var(--gold);
            color: var(--maroon);
            border: none;
            padding: 12px 24px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }

        #spin-button:hover {
            transform: scale(1.05);
        }

        #spin-button:active {
            transform: scale(0.95);
        }

        #result {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            min-height: 36px;
            margin-bottom: 20px;
        }

        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 50;
            display: flex;
            gap: 10px;
        }

        .audio-btn {
            background: var(--gold);
            color: var(--maroon);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .audio-btn:hover {
            transform: scale(1.1);
        }

        .audio-btn:active {
            transform: scale(0.95);
        }

        .betting-table {
            background: var(--table-green);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .betting-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .bet-option {
            padding: 15px 30px;
            border: 2px solid var(--gold);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            min-width: 100px;
            text-align: center;
        }

        .bet-option.red {
            background: var(--chip-red);
        }

        .bet-option.black {
            background: var(--chip-black);
        }

        .bet-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .bet-option.selected {
            border-color: white;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .chips {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .chip {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 4px dashed var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            background: var(--maroon);
        }

        .chip:hover {
            transform: scale(1.1);
        }

        .chip.selected {
            box-shadow: 0 0 15px var(--gold);
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            color: var(--gold);
            font-weight: bold;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.8;
        }

        #message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            border-radius: 5px;
            background: var(--gold);
            color: var(--maroon);
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .message.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="wrap">
        <nav class="site-nav">
            <a href="index.html">Home</a>
            <a href="discover.html">Discover</a>
            <a href="hobbies.html">Hobbies</a>
            <a href="game.html" class="active">Game</a>
            <a href="career.html">Career</a>
            <a href="resume.html">Resume</a>
        </nav>

        <h1>Casino Roulette</h1>
        
        <div class="game-container">
            <div class="wheel-container">
                <canvas id="wheel" width="300" height="300"></canvas>
                <canvas id="pointer" class="pointer-container" width="30" height="20"></canvas>
            </div>
            <div id="result"></div>

            <div class="betting-table">
                <div class="betting-options">
                    <div class="bet-option red" onclick="selectBet('red')">RED</div>
                    <div class="bet-option black" onclick="selectBet('black')">BLACK</div>
                </div>

                <div class="chips">
                    <div class="chip" onclick="selectChip(10)">$10</div>
                    <div class="chip" onclick="selectChip(25)">$25</div>
                    <div class="chip" onclick="selectChip(50)">$50</div>
                    <div class="chip" onclick="selectChip(100)">$100</div>
                </div>

                <button id="spin-button" onclick="placeBetAndSpin()">PLACE BET & SPIN</button>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="balance">$1000</div>
                        <div class="stat-label">Balance</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="current-bet">$0</div>
                        <div class="stat-label">Current Bet</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="last-win">$0</div>
                        <div class="stat-label">Last Win</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="message"></div>
    </div>

    <!-- Audio elements -->
    <audio id="background-music" loop volume="0.3">
    </audio>
    <audio id="spin-sound" volume="0.5">
    </audio>
    <audio id="win-sound" volume="0.7">
    </audio>

    <!-- Audio control buttons -->
    <div class="audio-controls">
        <button class="audio-btn" id="music-toggle" title="Toggle Background Music">ðŸ”Š</button>
        <button class="audio-btn" id="sfx-toggle" title="Toggle Sound Effects">ðŸ””</button>
    </div>

    <script>
        // Game state
        let spinning = false;
        let currentRotation = 0;
        let spinTimeout;
        let balance = 1000;
        let currentBet = 0;
        let selectedBetType = null;
        let lastWin = 0;
        let selectedChipAmount = 0;
        let musicEnabled = true;
        let sfxEnabled = true;

        // Roulette wheel configuration
        const SEGMENTS = [
            0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26
        ];

        const getSegmentColor = (number) => {
            if (number === 0) return 'green';
            return number % 2 === 0 ? 'black' : 'red';
        };

        const SEGMENT_ANGLE = 360 / SEGMENTS.length; // Angle of each segment

        function initWheel() {
            const wheel = document.getElementById('wheel');
            const center = wheel.width / 2;
            const ctx = wheel.getContext('2d');
            const radius = center - 5;

            // Draw segments
            SEGMENTS.forEach((number, i) => {
                const startAngle = (i * SEGMENT_ANGLE - 90) * Math.PI / 180;
                const endAngle = ((i + 1) * SEGMENT_ANGLE - 90) * Math.PI / 180;

                ctx.beginPath();
                ctx.moveTo(center, center);
                ctx.arc(center, center, radius, startAngle, endAngle);
                ctx.fillStyle = getSegmentColor(number);
                ctx.fill();
                ctx.closePath();

                // Add numbers
                ctx.save();
                ctx.translate(center, center);
                ctx.rotate((i * SEGMENT_ANGLE + SEGMENT_ANGLE / 2 - 90) * Math.PI / 180);
                ctx.textAlign = 'right';
                ctx.fillStyle = 'white';
                ctx.font = '14px Arial';
                ctx.fillText(number.toString(), radius - 15, 5);
                ctx.restore();
            });

            // Draw center circle
            ctx.beginPath();
            ctx.arc(center, center, 15, 0, Math.PI * 2);
            ctx.fillStyle = '#FFC627';
            ctx.fill();
            ctx.closePath();

            // Draw pointer
            const pointerCtx = document.getElementById('pointer').getContext('2d');
            pointerCtx.beginPath();
            pointerCtx.moveTo(15, 0);
            pointerCtx.lineTo(0, 20);
            pointerCtx.lineTo(30, 20);
            pointerCtx.fillStyle = '#FFC627';
            pointerCtx.fill();
        }

        function updateStats() {
            document.getElementById('balance').textContent = `$${balance}`;
            document.getElementById('current-bet').textContent = `$${currentBet}`;
            document.getElementById('last-win').textContent = `$${lastWin}`;
        }

        function showMessage(text, isError = false) {
            const message = document.getElementById('message');
            message.textContent = text;
            message.style.background = isError ? '#ff4444' : 'var(--gold)';
            message.style.opacity = '1';
            setTimeout(() => message.style.opacity = '0', 3000);
        }

        function selectBet(type) {
            selectedBetType = type;
            document.querySelectorAll('.bet-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`.bet-option.${type}`).classList.add('selected');
        }

        function selectChip(amount) {
            selectedChipAmount = amount;
            currentBet = amount;
            document.querySelectorAll('.chip').forEach(chip => chip.classList.remove('selected'));
            document.querySelector(`.chip:nth-child(${[10, 25, 50, 100].indexOf(amount) + 1})`).classList.add('selected');
            updateStats();
        }

        // Audio context for generating sounds
        let audioContext = null;
        let isPlayingMusic = false;
        let currentMusicOscillators = null;

        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            return audioContext;
        }

        function generateCasinoMusic() {
            const ctx = initAudioContext();
            if (currentMusicOscillators !== null) return null; // Already playing

            const tempo = 120; // BPM
            const beatDuration = 60 / tempo;

            // Create upbeat, fun casino music with better quality
            const bass = ctx.createOscillator();
            const bassGain = ctx.createGain();
            const bassFilter = ctx.createBiquadFilter();
            
            bass.connect(bassFilter);
            bassFilter.connect(bassGain);
            bassGain.connect(ctx.destination);
            bass.type = 'sine';
            bassFilter.type = 'lowpass';
            bassFilter.frequency.setValueAtTime(200, ctx.currentTime);
            bassGain.gain.setValueAtTime(0.15, ctx.currentTime);
            
            // Upbeat bass line - more rhythmic and fun
            const bassPattern = [65.41, 82.41, 98.00, 110.00]; // C2, E2, G#2, A2 - Fun progression
            let bassIndex = 0;

            const bassInterval = setInterval(() => {
                if (!isPlayingMusic) {
                    clearInterval(bassInterval);
                    return;
                }
                bass.frequency.setTargetAtTime(bassPattern[bassIndex % bassPattern.length], ctx.currentTime, 0.05);
                bassIndex++;
            }, beatDuration * 250); // Faster bass pattern

            // High energy melody with triangle wave for cleaner sound
            const melody = ctx.createOscillator();
            const melodyGain = ctx.createGain();
            
            melody.connect(melodyGain);
            melodyGain.connect(ctx.destination);
            melody.type = 'triangle'; // Cleaner, less buzzy than square
            melodyGain.gain.setValueAtTime(0.1, ctx.currentTime);

            // Fun, energetic melody pattern - casino vibe!
            const melodyPattern = [349.23, 392.00, 440.00, 493.88, 523.25, 587.33]; // F4, G4, A4, B4, C5, D5
            let melodyIndex = 0;

            const melodyInterval = setInterval(() => {
                if (!isPlayingMusic) {
                    clearInterval(melodyInterval);
                    return;
                }
                melody.frequency.setTargetAtTime(melodyPattern[melodyIndex % melodyPattern.length], ctx.currentTime, 0.08);
                melodyIndex++;
            }, beatDuration * 150); // Faster, punchier melody

            // Add a bright high note layer for extra excitement
            const high = ctx.createOscillator();
            const highGain = ctx.createGain();
            
            high.connect(highGain);
            highGain.connect(ctx.destination);
            high.type = 'sine';
            highGain.gain.setValueAtTime(0.08, ctx.currentTime);

            const highPattern = [587.33, 659.25, 783.99, 880.00]; // D5, E5, G5, A5 - Bright notes
            let highIndex = 0;

            const highInterval = setInterval(() => {
                if (!isPlayingMusic) {
                    clearInterval(highInterval);
                    return;
                }
                high.frequency.setTargetAtTime(highPattern[highIndex % highPattern.length], ctx.currentTime, 0.06);
                highIndex += 0.7;
            }, beatDuration * 300);

            bass.start();
            melody.start();
            high.start();

            // Auto-restart music if it stops
            const restartInterval = setInterval(() => {
                if (isPlayingMusic && currentMusicOscillators === null) {
                    clearInterval(restartInterval);
                    currentMusicOscillators = generateCasinoMusic();
                }
            }, 5000);

            return { bass, melody, high, bassInterval, melodyInterval, highInterval, bassGain, melodyGain, highGain, restartInterval };
        }

        function stopCasinoMusic(oscillators) {
            if (oscillators) {
                try {
                    if (oscillators.bass) oscillators.bass.stop();
                    if (oscillators.melody) oscillators.melody.stop();
                    if (oscillators.high) oscillators.high.stop();
                    if (oscillators.bassInterval) clearInterval(oscillators.bassInterval);
                    if (oscillators.melodyInterval) clearInterval(oscillators.melodyInterval);
                    if (oscillators.highInterval) clearInterval(oscillators.highInterval);
                    if (oscillators.restartInterval) clearInterval(oscillators.restartInterval);
                } catch (e) {}
            }
        }

        function playSpinSound() {
            const ctx = initAudioContext();
            const oscillator = ctx.createOscillator();
            const gain = ctx.createGain();

            oscillator.connect(gain);
            gain.connect(ctx.destination);

            oscillator.frequency.setValueAtTime(800, ctx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(400, ctx.currentTime + 0.3);

            gain.gain.setValueAtTime(0.3, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);

            oscillator.start(ctx.currentTime);
            oscillator.stop(ctx.currentTime + 0.3);
        }

        function playWinSound() {
            const ctx = initAudioContext();

            // Create a fun winning chime with multiple notes
            const frequencies = [523.25, 659.25, 783.99]; // C5, E5, G5
            
            frequencies.forEach((freq, index) => {
                const oscillator = ctx.createOscillator();
                const gain = ctx.createGain();

                oscillator.connect(gain);
                gain.connect(ctx.destination);

                oscillator.frequency.setValueAtTime(freq, ctx.currentTime);
                gain.gain.setValueAtTime(0.2, ctx.currentTime + index * 0.1);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5 + index * 0.1);

                oscillator.start(ctx.currentTime + index * 0.1);
                oscillator.stop(ctx.currentTime + 0.5 + index * 0.1);
            });
        }

        function placeBetAndSpin() {
            if (spinning) return;
            
            if (!selectedBetType || currentBet === 0) {
                showMessage('Please select a color and bet amount!', true);
                return;
            }

            if (currentBet > balance) {
                showMessage('Insufficient funds!', true);
                return;
            }

            balance -= currentBet;
            updateStats();
            
            // Play spin sound
            if (sfxEnabled) {
                try {
                    playSpinSound();
                } catch (e) {}
            }
            
            spinWheel();
        }

        function spinWheel() {
            if (spinning) return;
            spinning = true;
            
            // Clear previous spin
            clearTimeout(spinTimeout);
            
            // Random number of complete rotations (8-10) for faster spins
            const rotations = 8 + Math.random() * 2;
            const finalAngle = rotations * 360 + Math.random() * 360;
            const duration = 3000; // 3 seconds spin (faster)
            const startTime = Date.now();
            const startAngle = currentRotation % 360; // Reset start angle to prevent cumulative slowdown

            function animate() {
                const now = Date.now();
                const elapsed = now - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Modified easing function for more dynamic spin
                const easeOut = (t) => {
                    // Fast start, maintained speed, smooth end
                    return t < 0.5 
                        ? 4 * t * t * t 
                        : 1 - Math.pow(-2 * t + 2, 3) / 2;
                };
                
                // Calculate current rotation with consistent speed
                currentRotation = startAngle + (finalAngle - startAngle) * easeOut(progress);
                document.getElementById('wheel').style.transform = `rotate(${currentRotation}deg)`;

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    spinning = false;
                    // Calculate final position
                    const normalizedRotation = (currentRotation % 360 + 360) % 360;
                    const landedSegmentIndex = Math.floor(((360 - normalizedRotation) % 360) / SEGMENT_ANGLE);
                    const landedNumber = SEGMENTS[landedSegmentIndex];
                    const landedColor = getSegmentColor(landedNumber);
                    
                    document.getElementById('result').textContent = 
                        `Landed on ${landedNumber} (${landedColor.toUpperCase()})`;
                    
                    // Process bet result
                    if (landedNumber === 0) {
                        showMessage('House wins! (Green 0)', true);
                        lastWin = 0;
                    } else if (landedColor === selectedBetType) {
                        lastWin = currentBet * 2;
                        balance += lastWin;
                        
                        // Play win sound
                        if (sfxEnabled) {
                            try {
                                playWinSound();
                            } catch (e) {}
                        }
                        
                        showMessage(`You won $${lastWin}!`);
                    } else {
                        lastWin = 0;
                        showMessage('Better luck next time!', true);
                    }
                    
                    updateStats();
                }
            }

            requestAnimationFrame(animate);
        }

        // Initialize wheel and game state when document loads
        document.addEventListener('DOMContentLoaded', () => {
            initWheel();
            updateStats();
            
            // Start background music automatically
            musicEnabled = true;
            isPlayingMusic = true;
            currentMusicOscillators = generateCasinoMusic();
            document.getElementById('music-toggle').textContent = 'ðŸ”Š';
            
            // Setup audio controls
            const musicToggle = document.getElementById('music-toggle');
            const sfxToggle = document.getElementById('sfx-toggle');
            
            // Music toggle
            musicToggle.addEventListener('click', () => {
                musicEnabled = !musicEnabled;
                if (musicEnabled) {
                    isPlayingMusic = true;
                    currentMusicOscillators = generateCasinoMusic();
                    musicToggle.textContent = 'ðŸ”Š';
                } else {
                    isPlayingMusic = false;
                    stopCasinoMusic(currentMusicOscillators);
                    musicToggle.textContent = 'ðŸ”‡';
                }
            });
            
            // SFX toggle
            sfxToggle.addEventListener('click', () => {
                sfxEnabled = !sfxEnabled;
                if (sfxEnabled) {
                    sfxToggle.textContent = 'ðŸ””';
                } else {
                    sfxToggle.textContent = 'ðŸ”•';
                }
            });
        });
    </script>
</body>
</html>
